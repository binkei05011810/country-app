{"ast":null,"code":"// Put effect similar to dispatch in thunk => trigger another action to send data to reducer\nimport { getCountrySuccess, GET_COUNTRY_SAGA } from '../actions'; // Effects like takeEvery, takeLatest: define when to run the saga (which action type will trigger the saga)\n// Saga have to be triggered. thunk can be called straight away\n\nfunction* getCountry() {\n  yield takeEvery(GET_COUNTRY_SAGA, function* (action) {\n    const name = action.payload;\n    const url = `https://restcountries.eu/rest/v2/${name ? `name/${name}?fullText=true` : \"all\"}`; //@ts-ignore\n\n    const response = yield fetch(url); //@ts-ignore\n\n    const data = yield response.json();\n    yield put(getCountrySuccess(data));\n  });\n} // Put effect similar to dispatch in thunk => trigger another action to send data to reducer\n\n\nimport { takeEvery, put, select } from 'redux-saga/effects';\nimport { reactCountrySuccess, LIKE_COUNTRY_SAGA } from '../actions';\n\nconst getFavCountries = store => store.countryReducer.favCountries; // Effects like takeEvery, takeLatest: define when to run the saga (which action type will trigger the saga)\n// Saga have to be triggered. thunk can be called straight away\n\n\nfunction* likeSaga() {\n  yield takeEvery(LIKE_COUNTRY_SAGA, function* (action) {\n    //@ts-ignore\n    const favCountries = yield select(getFavCountries);\n    const country = action.payload;\n    const newFav = [...favCountries, country];\n    localStorage.setItem(\"favCountries\", JSON.stringify(newFav)); //@ts-ignore\n\n    yield put(reactCountrySuccess(newFav));\n  });\n}\n\nexport default getCountry;\nexport default getCountry;","map":{"version":3,"sources":["/Users/meocuabinh/Documents/Integrify/fs7-finland-react-redux-typescript/src/redux/saga/sagas.ts"],"names":["getCountrySuccess","GET_COUNTRY_SAGA","getCountry","takeEvery","action","name","payload","url","response","fetch","data","json","put","select","reactCountrySuccess","LIKE_COUNTRY_SAGA","getFavCountries","store","countryReducer","favCountries","likeSaga","country","newFav","localStorage","setItem","JSON","stringify"],"mappings":"AAAA;AAGA,SAASA,iBAAT,EAA4BC,gBAA5B,QAAoE,YAApE,C,CAEA;AACA;;AACA,UAAUC,UAAV,GAAuB;AACnB,QAAMC,SAAS,CAACF,gBAAD,EAAmB,WAAWG,MAAX,EAAsD;AACpF,UAAMC,IAAI,GAAGD,MAAM,CAACE,OAApB;AACA,UAAMC,GAAG,GAAI,oCAAmCF,IAAI,GAAI,QAAOA,IAAK,gBAAhB,GAAkC,KAAM,EAA5F,CAFoF,CAIpF;;AACA,UAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,CAA5B,CALoF,CAMpF;;AACA,UAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;AACA,UAAMC,GAAG,CAACZ,iBAAiB,CAACU,IAAD,CAAlB,CAAT;AACH,GATc,CAAf;AAUH,C,CAED;;;AACA,SAASP,SAAT,EAAoBS,GAApB,EAAyBC,MAAzB,QAAuC,oBAAvC;AAEA,SAASC,mBAAT,EAA8BC,iBAA9B,QAAgH,YAAhH;;AAGA,MAAMC,eAAe,GAAIC,KAAD,IAAkBA,KAAK,CAACC,cAAN,CAAqBC,YAA/D,C,CACA;AACA;;;AACA,UAAUC,QAAV,GAAqB;AACjB,QAAMjB,SAAS,CAACY,iBAAD,EAAoB,WAAWX,MAAX,EAAuD;AACtF;AACA,UAAMe,YAAuB,GAAG,MAAMN,MAAM,CAACG,eAAD,CAA5C;AACA,UAAMK,OAAO,GAAGjB,MAAM,CAACE,OAAvB;AAEA,UAAMgB,MAAM,GAAG,CAAC,GAAGH,YAAJ,EAAkBE,OAAlB,CAAf;AACAE,IAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCC,IAAI,CAACC,SAAL,CAAeJ,MAAf,CAArC,EANsF,CAQtF;;AACA,UAAMV,GAAG,CAACE,mBAAmB,CAACQ,MAAD,CAApB,CAAT;AACH,GAVc,CAAf;AAWH;;AAED,eAAepB,UAAf;AAEA,eAAeA,UAAf","sourcesContent":["// Put effect similar to dispatch in thunk => trigger another action to send data to reducer\n\n\nimport { getCountrySuccess, GET_COUNTRY_SAGA, getCountrySaga } from '../actions';\n\n// Effects like takeEvery, takeLatest: define when to run the saga (which action type will trigger the saga)\n// Saga have to be triggered. thunk can be called straight away\nfunction* getCountry() {\n    yield takeEvery(GET_COUNTRY_SAGA, function* (action: ReturnType<typeof getCountrySaga>) {\n        const name = action.payload;\n        const url = `https://restcountries.eu/rest/v2/${name ? `name/${name}?fullText=true` : \"all\"}`;\n\n        //@ts-ignore\n        const response = yield fetch(url);\n        //@ts-ignore\n        const data = yield response.json();\n        yield put(getCountrySuccess(data));\n    })\n}\n\n// Put effect similar to dispatch in thunk => trigger another action to send data to reducer\nimport { takeEvery, put, select } from 'redux-saga/effects';\n\nimport { reactCountrySuccess, LIKE_COUNTRY_SAGA, UNLIKE_COUNTRY_SAGA, likeCountrySaga, unlikeCountrySaga } from '../actions';\nimport { Store } from '../store';\n\nconst getFavCountries = (store: Store) => store.countryReducer.favCountries;\n// Effects like takeEvery, takeLatest: define when to run the saga (which action type will trigger the saga)\n// Saga have to be triggered. thunk can be called straight away\nfunction* likeSaga() {\n    yield takeEvery(LIKE_COUNTRY_SAGA, function* (action: ReturnType<typeof likeCountrySaga>) {\n        //@ts-ignore\n        const favCountries: Country[] = yield select(getFavCountries);\n        const country = action.payload;\n\n        const newFav = [...favCountries, country];\n        localStorage.setItem(\"favCountries\", JSON.stringify(newFav));\n\n        //@ts-ignore\n        yield put(reactCountrySuccess(newFav));\n    })\n}\n\nexport default getCountry;\n\nexport default getCountry;"]},"metadata":{},"sourceType":"module"}